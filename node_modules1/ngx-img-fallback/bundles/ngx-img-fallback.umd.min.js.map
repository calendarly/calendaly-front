{"version":3,"file":"ngx-img-fallback.umd.min.js","sources":["~/ngx-img-fallback/src/app/modules/ngx-img-fallback/ngx-img-fallback.directive.ts","~/ngx-img-fallback/src/app/modules/ngx-img-fallback/ngx-img-fallback.module.ts"],"sourcesContent":["/**\n * Created by vadimdez on 28/01/2018.\n */\n\nimport { Directive, ElementRef, Input, Output, EventEmitter, OnDestroy, Renderer2 } from '@angular/core';\nexport class ImgFallbackDirective implements OnDestroy {\n\n   imgSrc: string;\n   loaded = new EventEmitter<boolean>();\nprivate nativeElement: HTMLElement;\nprivate isApplied: boolean = false;\nprivate ERROR_EVENT_TYPE: string = 'error';\nprivate LOAD_EVENT_TYPE: string = 'load';\nprivate cancelOnError: Function;\nprivate cancelOnLoad: Function;\n/**\n * @param {?} el\n * @param {?} renderer\n */\nconstructor(private el: ElementRef,\nprivate renderer: Renderer2) {\n    this.nativeElement = el.nativeElement;\n\n    this.onError = this.onError.bind(this);\n    this.onLoad = this.onLoad.bind(this);\n    this.addEvents();\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.removeErrorEvent();\n    this.removeOnLoadEvent();\n  }\n/**\n * @return {?}\n */\nprivate onError() {\n    if (this.nativeElement.getAttribute('src') !== this.imgSrc) {\n      this.isApplied = true;\n      this.renderer.setAttribute(this.nativeElement, 'src', this.imgSrc);\n    }\n\n    this.removeOnLoadEvent();\n  }\n/**\n * @return {?}\n */\nprivate onLoad() {\n    this.loaded.emit(this.isApplied);\n  }\n/**\n * @return {?}\n */\nprivate removeErrorEvent() {\n    if (this.cancelOnError) {\n      this.cancelOnError();\n    }\n  }\n/**\n * @return {?}\n */\nprivate removeOnLoadEvent() {\n    if (this.cancelOnLoad) {\n      this.cancelOnLoad();\n    }\n  }\n/**\n * @return {?}\n */\nprivate addEvents() {\n    this.cancelOnError = this.renderer.listen(this.nativeElement, this.ERROR_EVENT_TYPE, this.onError);\n    this.cancelOnLoad = this.renderer.listen(this.nativeElement, this.LOAD_EVENT_TYPE, this.onLoad);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[src-fallback]'\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer2, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'imgSrc': [{ type: Input, args: ['src-fallback', ] },],\n'loaded': [{ type: Output, args: ['loaded', ] },],\n};\n}\n\nfunction ImgFallbackDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nImgFallbackDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nImgFallbackDirective.ctorParameters;\n/** @type {?} */\nImgFallbackDirective.propDecorators;\n/** @type {?} */\nImgFallbackDirective.prototype.imgSrc;\n/** @type {?} */\nImgFallbackDirective.prototype.loaded;\n/** @type {?} */\nImgFallbackDirective.prototype.nativeElement;\n/** @type {?} */\nImgFallbackDirective.prototype.isApplied;\n/** @type {?} */\nImgFallbackDirective.prototype.ERROR_EVENT_TYPE;\n/** @type {?} */\nImgFallbackDirective.prototype.LOAD_EVENT_TYPE;\n/** @type {?} */\nImgFallbackDirective.prototype.cancelOnError;\n/** @type {?} */\nImgFallbackDirective.prototype.cancelOnLoad;\n/** @type {?} */\nImgFallbackDirective.prototype.el;\n/** @type {?} */\nImgFallbackDirective.prototype.renderer;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","/**\n * Created by vadimdez on 27/11/2016.\n */\n\nimport { NgModule } from '@angular/core';\n\nimport { ImgFallbackDirective } from './ngx-img-fallback.directive';\nexport class ImgFallbackModule { static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  declarations: [ImgFallbackDirective],\n  exports: [ImgFallbackDirective]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ImgFallbackModule_tsickle_Closure_declarations() {\n/** @type {?} */\nImgFallbackModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nImgFallbackModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["ImgFallbackDirective","el","renderer","this","loaded","EventEmitter","isApplied","ERROR_EVENT_TYPE","LOAD_EVENT_TYPE","nativeElement","onError","bind","onLoad","addEvents","prototype","ngOnDestroy","removeErrorEvent","removeOnLoadEvent","getAttribute","imgSrc","setAttribute","emit","cancelOnError","cancelOnLoad","listen","decorators","type","Directive","args","selector","ctorParameters","ElementRef","Renderer2","propDecorators","Input","Output","ImgFallbackModule","NgModule","declarations","exports"],"mappings":"2PAIA,IAAAA,EAAA,WAeA,SAAAA,EAFsBC,EAAwBC,GAAxBC,KAAtBF,GAAsBA,EAAwBE,KAA9CD,SAA8CA,EAT3CC,KAAHC,OACY,IAAIC,EAAAA,aAENF,KAAVG,WAA+B,EACrBH,KAAVI,iBAAqC,QAC3BJ,KAAVK,gBAAoC,OAQhCL,KAAKM,cAAgBR,EAAGQ,cAExBN,KAAKO,QAAUP,KAAKO,QAAQC,KAAKR,MACjCA,KAAKS,OAAST,KAAKS,OAAOD,KAAKR,MAC/BA,KAAKU,mBAKTb,EAAAc,UAAAC,YAAA,WACIZ,KALKa,mBAMLb,KALKc,qBAGNjB,EAAHc,UAAAJ,QAAG,WAQKP,KAPKM,cAAcS,aAAa,SAAWf,KAAKgB,SAQlDhB,KAPKG,WAAY,EAQjBH,KAPKD,SAASkB,aAAajB,KAAKM,cAAe,MAAON,KAAKgB,SAU7DhB,KAPKc,qBAGNjB,EAAHc,UAAAF,OAAG,WAUCT,KATKC,OAAOiB,KAAKlB,KAAKG,YAGvBN,EAAHc,UAAAE,iBAAG,WAYKb,KAXKmB,eAYPnB,KAXKmB,iBAIRtB,EAAHc,UAAAG,kBAAG,WAcKd,KAbKoB,cAcPpB,KAbKoB,gBAIRvB,EAAHc,UAAAD,UAAG,WAgBCV,KAfKmB,cAAgBnB,KAAKD,SAASsB,OAAOrB,KAAKM,cAAeN,KAAKI,iBAAkBJ,KAAKO,SAgB1FP,KAfKoB,aAAepB,KAAKD,SAASsB,OAAOrB,KAAKM,cAAeN,KAAKK,gBAAiBL,KAAKS,WArD5F,GAuDOZ,EAAPyB,aACEC,KAAMC,EAAAA,UAAWC,OAgBjBC,SAfU,qBAIX7B,EAAD8B,eAAC,WAAA,QAkBAJ,KAAMK,EAAAA,aACNL,KAAMM,EAAAA,aAfAhC,EAAPiC,gBAkBAd,SAjBaO,KAAMQ,EAAAA,MAAON,MAAM,kBAkBhCxB,SAjBasB,KAAMS,EAAAA,OAAQP,MAAM,aCnEjC,IAAAQ,EAAA,kBAAA,aAAA,GAIwCA,EAAxCX,aACEC,KAAMW,EAAAA,SAAUT,OAAhBU,cACctC,GAAduC,SACSvC,OAIVoC,EAADN,eAAC,WAAA"}
