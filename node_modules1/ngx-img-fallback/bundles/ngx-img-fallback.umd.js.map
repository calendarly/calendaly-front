{"version":3,"file":"ngx-img-fallback.umd.js","sources":["~/ngx-img-fallback/src/app/modules/ngx-img-fallback/ngx-img-fallback.module.ts","~/ngx-img-fallback/src/app/modules/ngx-img-fallback/ngx-img-fallback.directive.ts"],"sourcesContent":["/**\n * Created by vadimdez on 27/11/2016.\n */\n\nimport { NgModule } from '@angular/core';\n\nimport { ImgFallbackDirective } from './ngx-img-fallback.directive';\nexport class ImgFallbackModule { static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  declarations: [ImgFallbackDirective],\n  exports: [ImgFallbackDirective]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ImgFallbackModule_tsickle_Closure_declarations() {\n/** @type {?} */\nImgFallbackModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nImgFallbackModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","/**\n * Created by vadimdez on 28/01/2018.\n */\n\nimport { Directive, ElementRef, Input, Output, EventEmitter, OnDestroy, Renderer2 } from '@angular/core';\nexport class ImgFallbackDirective implements OnDestroy {\n\n   imgSrc: string;\n   loaded = new EventEmitter<boolean>();\nprivate nativeElement: HTMLElement;\nprivate isApplied: boolean = false;\nprivate ERROR_EVENT_TYPE: string = 'error';\nprivate LOAD_EVENT_TYPE: string = 'load';\nprivate cancelOnError: Function;\nprivate cancelOnLoad: Function;\n/**\n * @param {?} el\n * @param {?} renderer\n */\nconstructor(private el: ElementRef,\nprivate renderer: Renderer2) {\n    this.nativeElement = el.nativeElement;\n\n    this.onError = this.onError.bind(this);\n    this.onLoad = this.onLoad.bind(this);\n    this.addEvents();\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.removeErrorEvent();\n    this.removeOnLoadEvent();\n  }\n/**\n * @return {?}\n */\nprivate onError() {\n    if (this.nativeElement.getAttribute('src') !== this.imgSrc) {\n      this.isApplied = true;\n      this.renderer.setAttribute(this.nativeElement, 'src', this.imgSrc);\n    }\n\n    this.removeOnLoadEvent();\n  }\n/**\n * @return {?}\n */\nprivate onLoad() {\n    this.loaded.emit(this.isApplied);\n  }\n/**\n * @return {?}\n */\nprivate removeErrorEvent() {\n    if (this.cancelOnError) {\n      this.cancelOnError();\n    }\n  }\n/**\n * @return {?}\n */\nprivate removeOnLoadEvent() {\n    if (this.cancelOnLoad) {\n      this.cancelOnLoad();\n    }\n  }\n/**\n * @return {?}\n */\nprivate addEvents() {\n    this.cancelOnError = this.renderer.listen(this.nativeElement, this.ERROR_EVENT_TYPE, this.onError);\n    this.cancelOnLoad = this.renderer.listen(this.nativeElement, this.LOAD_EVENT_TYPE, this.onLoad);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[src-fallback]'\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer2, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'imgSrc': [{ type: Input, args: ['src-fallback', ] },],\n'loaded': [{ type: Output, args: ['loaded', ] },],\n};\n}\n\nfunction ImgFallbackDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nImgFallbackDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nImgFallbackDirective.ctorParameters;\n/** @type {?} */\nImgFallbackDirective.propDecorators;\n/** @type {?} */\nImgFallbackDirective.prototype.imgSrc;\n/** @type {?} */\nImgFallbackDirective.prototype.loaded;\n/** @type {?} */\nImgFallbackDirective.prototype.nativeElement;\n/** @type {?} */\nImgFallbackDirective.prototype.isApplied;\n/** @type {?} */\nImgFallbackDirective.prototype.ERROR_EVENT_TYPE;\n/** @type {?} */\nImgFallbackDirective.prototype.LOAD_EVENT_TYPE;\n/** @type {?} */\nImgFallbackDirective.prototype.cancelOnError;\n/** @type {?} */\nImgFallbackDirective.prototype.cancelOnLoad;\n/** @type {?} */\nImgFallbackDirective.prototype.el;\n/** @type {?} */\nImgFallbackDirective.prototype.renderer;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["NgModule","Output","Input","Renderer2","ElementRef","Directive","EventEmitter"],"mappings":"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"}
